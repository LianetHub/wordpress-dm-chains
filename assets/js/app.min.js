(()=>{"use strict";"undefined"!=typeof Fancybox&&null!==Fancybox&&Fancybox.bind("[data-fancybox]",{dragToClose:!1}),$(function(){const e={Android:()=>/Android/i.test(navigator.userAgent),BlackBerry:()=>/BlackBerry/i.test(navigator.userAgent),iOS:()=>/iPhone|iPad|iPod/i.test(navigator.userAgent),Opera:()=>/Opera Mini/i.test(navigator.userAgent),Windows:()=>/IEMobile/i.test(navigator.userAgent),any:function(){return this.Android()||this.BlackBerry()||this.iOS()||this.Opera()||this.Windows()}};function n(){e.any()||$(window).width()<992?$("body").removeClass("_pc").addClass("_touch"):$("body").removeClass("_touch").addClass("_pc")}n(),$(window).on("resize",()=>{n()}),$(document).on("click",e=>{const n=$(e.target);n.is(".policy__caption")&&(n.toggleClass("active"),n.next().slideToggle()),n.closest(".header__menu-toggler").length&&($(".header__menu-toggler").toggleClass("active"),$(".header").toggleClass("open-mobile-menu"),$("body").toggleClass("lock-mobile-menu")),!n.closest(".header").length&&$(".header").hasClass("open-mobile-menu")&&($(".header__menu-toggler").removeClass("active"),$(".header").removeClass("open-mobile-menu"),$("body").removeClass("lock-mobile-menu"))});const t=decodeURIComponent(window.location.hash);if(t&&t.startsWith("#policy-")){const l=$(t);if(l.length){const c=l.find(".policy__caption"),p=l.find(".policy__content");p.is(":hidden")&&(c.addClass("active"),p.stop().slideDown(300)),$("html, body").animate({scrollTop:l.offset().top},600)}}if($(".promo").length&&new Swiper(".promo__slider",{effect:"fade",fadeEffect:{crossFade:!0},autoplay:{delay:3e3},loop:!0,allowTouchMove:!1,preventClicks:!0,preventClicksPropagation:!0,simulateTouch:!1,noSwiping:!0}),$(".creating-rules__slider").length&&new Swiper(".creating-rules__slider .swiper",{pagination:{el:".creating-rules__pagination",clickable:!0}}),$(".creating-steps__slider").length&&$(".creating-steps__slider").each(function(e,n){const t=$(n).find(".swiper")[0],i=$(n).find(".creating-steps__pagination")[0];new Swiper(t,{watchOverflow:!0,pagination:{el:i,clickable:!0}})}),$(".creating-steps__elements").length){const u=300;function g(e,n){e.forEach(e=>{if(e.isIntersecting){const t=$(e.target).find(".creating-steps__elements-item"),i=$(e.target).find(".creating-steps__elements-quantity");i.addClass("visible"),t.each(function(e){setTimeout(()=>{$(this).addClass("visible"),i.find("span").text(e+1)},e*u)}),n.unobserve(e.target)}})}$(".creating-steps__elements-item, .creating-steps__elements-quantity").removeClass("visible");const m=new IntersectionObserver(g,{threshold:.5}),f=document.querySelector(".creating-steps__elements");m.observe(f)}var i=document.querySelectorAll('input[type="tel"]'),a=function(e){return e.value.replace(/\D/g,"")},s=function(e){var n=e.target,t=a(n),i=e.clipboardData||window.clipboardData;if(i){var s=i.getData("Text");if(/\D/g.test(s))return void(n.value=t)}},o=function(e){var n=e.target,t=a(n),i=n.selectionStart,s="";if(!t)return n.value="";if(n.value.length==i){if(["7","8","9"].indexOf(t[0])>-1){"9"==t[0]&&(t="7"+t);var o="8"==t[0]?"8":"+7";s=n.value=o+" ",t.length>1&&(s+="("+t.substring(1,4)),t.length>=5&&(s+=") "+t.substring(4,7)),t.length>=8&&(s+="-"+t.substring(7,9)),t.length>=10&&(s+="-"+t.substring(9,11))}else s="+"+t.substring(0,16);n.value=s}else e.data&&/\D/g.test(e.data)&&(n.value=t)},d=function(e){var n=e.target.value.replace(/\D/g,"");8==e.keyCode&&1==n.length&&(e.target.value="")};for(var r of i)r.addEventListener("keydown",d),r.addEventListener("input",o,!1),r.addEventListener("paste",s,!1);if($("#order").length){const h=$("#order"),_=h.find('input[name="delivery_type"]'),v=h.find('input[name="payment_type"]'),y=h.find('input[name="contact_method"]'),b=h.find('input[name="address"]').closest(".form__controls"),C=h.find('[data-type="business"]'),w=h.find('[data-type="individual"]'),k=h.find('input[name="email"]').closest(".form__controls"),S=h.find('input[name="telegram_user"]').closest(".form__controls"),x=h.find(".form__group").eq(2).find(".form__group-items > .form__controls").eq(2),A=$("#price_product_input"),D=$("#price_delivery_input"),O=h.find(".form__total"),T=h.find(".form__total-value"),q=h.find('input[name="confirm_policies"]').closest(".form__radio-btn"),B=h.find('input[name="confirm_policies"]'),E=h.find('input[type="submit"]');function I(){const e=(parseInt(A.val())||0)+(parseInt(D.val())||0);T.text(e.toLocaleString("ru-RU")+" â‚½")}function F(){"cdek_courier"===h.find('input[name="delivery_type"]:checked').val()?b.removeClass("hidden"):b.addClass("hidden"),D.val(0),I(),M()}function L(){const e=h.find('input[name="payment_type"]:checked').val();C.addClass("hidden"),w.addClass("hidden"),"individual_card"===e?w.removeClass("hidden"):"business_invoice"===e&&C.removeClass("hidden"),M()}function P(){const e=h.find('input[name="contact_method"]:checked').val();switch(k.addClass("hidden"),S.addClass("hidden"),x.addClass("hidden"),e){case"email":k.removeClass("hidden");break;case"telegram":S.removeClass("hidden");break;case"whatsapp":x.removeClass("hidden")}M()}function M(){const e=h.find('input[name="delivery_type"]:checked').length>0,n=h.find('input[name="payment_type"]:checked').length>0,t=h.find('input[name="contact_method"]:checked').length>0;e&&n&&t?(O.removeClass("hidden"),q.removeClass("hidden")):(O.addClass("hidden"),q.addClass("hidden"),B.prop("checked",!1),W())}function W(){E.prop("disabled",!B.prop("checked"))}_.on("change",F),v.on("change",L),y.on("change",P),B.on("change",W),F(),L(),P(),W()}})})();