(()=>{"use strict";"undefined"!=typeof Fancybox&&null!==Fancybox&&Fancybox.bind("[data-fancybox]",{dragToClose:!1}),$(function(){const e={Android:()=>/Android/i.test(navigator.userAgent),BlackBerry:()=>/BlackBerry/i.test(navigator.userAgent),iOS:()=>/iPhone|iPad|iPod/i.test(navigator.userAgent),Opera:()=>/Opera Mini/i.test(navigator.userAgent),Windows:()=>/IEMobile/i.test(navigator.userAgent),any:function(){return this.Android()||this.BlackBerry()||this.iOS()||this.Opera()||this.Windows()}};function n(){e.any()||$(window).width()<992?$("body").removeClass("_pc").addClass("_touch"):$("body").removeClass("_touch").addClass("_pc")}if(n(),$(window).on("resize",()=>{n()}),$(document).on("click",e=>{const n=$(e.target);n.is(".policy__caption")&&(n.toggleClass("active"),n.next().slideToggle()),n.closest(".header__menu-toggler").length&&($(".header__menu-toggler").toggleClass("active"),$(".header").toggleClass("open-mobile-menu"),$("body").toggleClass("lock-mobile-menu")),!n.closest(".header").length&&$(".header").hasClass("open-mobile-menu")&&($(".header__menu-toggler").removeClass("active"),$(".header").removeClass("open-mobile-menu"),$("body").removeClass("lock-mobile-menu"))}),$(".promo").length&&new Swiper(".promo__slider",{effect:"fade",fadeEffect:{crossFade:!0},autoplay:{delay:3e3},loop:!0,allowTouchMove:!1,preventClicks:!0,preventClicksPropagation:!0,simulateTouch:!1,noSwiping:!0}),$(".creating-rules__slider").length&&new Swiper(".creating-rules__slider .swiper",{pagination:{el:".creating-rules__pagination",clickable:!0}}),$(".creating-steps__slider").length&&$(".creating-steps__slider").each(function(e,n){const t=$(n).find(".swiper")[0],i=$(n).find(".creating-steps__pagination")[0];new Swiper(t,{watchOverflow:!0,pagination:{el:i,clickable:!0}})}),$(".creating-steps__elements").length){const d=300;function l(e,n){e.forEach(e=>{if(e.isIntersecting){const t=$(e.target).find(".creating-steps__elements-item"),i=$(e.target).find(".creating-steps__elements-quantity");i.addClass("visible"),t.each(function(e){setTimeout(()=>{$(this).addClass("visible"),i.find("span").text(e+1)},e*d)}),n.unobserve(e.target)}})}$(".creating-steps__elements-item, .creating-steps__elements-quantity").removeClass("visible");const c=new IntersectionObserver(l,{threshold:.5}),u=document.querySelector(".creating-steps__elements");c.observe(u)}var t=document.querySelectorAll('input[type="tel"]'),i=function(e){return e.value.replace(/\D/g,"")},a=function(e){var n=e.target,t=i(n),a=e.clipboardData||window.clipboardData;if(a){var s=a.getData("Text");if(/\D/g.test(s))return void(n.value=t)}},s=function(e){var n=e.target,t=i(n),a=n.selectionStart,s="";if(!t)return n.value="";if(n.value.length==a){if(["7","8","9"].indexOf(t[0])>-1){"9"==t[0]&&(t="7"+t);var o="8"==t[0]?"8":"+7";s=n.value=o+" ",t.length>1&&(s+="("+t.substring(1,4)),t.length>=5&&(s+=") "+t.substring(4,7)),t.length>=8&&(s+="-"+t.substring(7,9)),t.length>=10&&(s+="-"+t.substring(9,11))}else s="+"+t.substring(0,16);n.value=s}else e.data&&/\D/g.test(e.data)&&(n.value=t)},o=function(e){var n=e.target.value.replace(/\D/g,"");8==e.keyCode&&1==n.length&&(e.target.value="")};for(var r of t)r.addEventListener("keydown",o),r.addEventListener("input",s,!1),r.addEventListener("paste",a,!1);if($("#order").length){const p=$("#order"),g=p.find('input[name="delivery_type"]'),m=p.find('input[name="payment_type"]'),f=p.find('input[name="contact_method"]'),h=p.find('input[name="address"]').closest(".form__controls"),_=p.find('[data-type="business"]'),v=p.find('[data-type="individual"]'),y=p.find('input[name="email"]').closest(".form__controls"),b=p.find('input[name="telegram_user"]').closest(".form__controls"),C=p.find(".form__group").eq(2).find(".form__group-items > .form__controls").eq(2),w=$("#price_product_input"),k=$("#price_delivery_input"),S=p.find(".form__total"),x=p.find(".form__total-value"),A=p.find('input[name="confirm_policies"]').closest(".form__radio-btn"),O=p.find('input[name="confirm_policies"]'),D=p.find('input[type="submit"]');function q(){const e=(parseInt(w.val())||0)+(parseInt(k.val())||0);x.text(e.toLocaleString("ru-RU")+" â‚½")}function B(){"cdek_courier"===p.find('input[name="delivery_type"]:checked').val()?h.removeClass("hidden"):h.addClass("hidden"),k.val(0),q(),I()}function E(){const e=p.find('input[name="payment_type"]:checked').val();_.addClass("hidden"),v.addClass("hidden"),"individual_card"===e?v.removeClass("hidden"):"business_invoice"===e&&_.removeClass("hidden"),I()}function T(){const e=p.find('input[name="contact_method"]:checked').val();switch(y.addClass("hidden"),b.addClass("hidden"),C.addClass("hidden"),e){case"email":y.removeClass("hidden");break;case"telegram":b.removeClass("hidden");break;case"whatsapp":C.removeClass("hidden")}I()}function I(){const e=p.find('input[name="delivery_type"]:checked').length>0,n=p.find('input[name="payment_type"]:checked').length>0,t=p.find('input[name="contact_method"]:checked').length>0;e&&n&&t?(S.removeClass("hidden"),A.removeClass("hidden")):(S.addClass("hidden"),A.addClass("hidden"),O.prop("checked",!1),F())}function F(){D.prop("disabled",!O.prop("checked"))}g.on("change",B),m.on("change",E),f.on("change",T),O.on("change",F),B(),E(),T(),F()}})})();